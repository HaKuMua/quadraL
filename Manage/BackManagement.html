<!DOCTYPE html>
<html dir="ltr" lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" type="image/png" sizes="16x16" href="img/favicon.png">
		<link rel="stylesheet" href="layui/css/layui.css" media="all">
		<link href="css/style.min.css" rel="stylesheet">
		<script src="libs/jquery/dist/jquery.min.js"></script>
		<!-- Bootstrap tether Core JavaScript -->
		<script src="libs/popper.js/dist/umd/popper.min.js"></script>
		<script src="libs/bootstrap/dist/js/bootstrap.min.js"></script>
		<!-- slimscrollbar scrollbar JavaScript -->
		<script src="extra-libs/sparkline/sparkline.js"></script>
		<!--Wave Effects -->
		<script src="js/waves.js"></script>
		<!--Menu sidebar -->
		<script src="js/sidebarmenu.js"></script>
		<!--Custom JavaScript -->
		<script src="js/custom.js"></script>
		<script src="libs/bootstrap/dist/js/bootstrap.min.js"></script>
		<script src="js/carousel.js"></script>
		<script src="libs/jquery/dist/jquery.min.js"></script>
		<title>后台管理</title>
		<style>
			.carousel-inner img {
		      width: 100%;
		      height: 100%;
			}
			
		</style>
	</head>
	<body>
		<!-- Preloader - style you can find in spinners.css -->
		<div class="preloader">
			<div class="lds-ripple">
				<div class="lds-pos"></div>
				<div class="lds-pos"></div>
			</div>
		</div>
		<!-- Main wrapper - style you can find in pages.scss -->
		<div id="main-wrapper" data-navbarbg="skin6" data-theme="light" data-layout="vertical" data-sidebartype="full"
		 data-boxed-layout="full">
			<!-- Topbar header - style you can find in pages.scss -->
			<header class="topbar" data-navbarbg="skin6"  style="position: relative;z-index: 9;">
				<nav class="navbar top-navbar navbar-expand-md navbar-light">
					<div class="navbar-header" data-logobg="skin5">
						<!-- This is for the sidebar toggle which is visible on mobile only -->
						<a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)">
							<i class="ti-menu ti-close"></i>
						</a>
						<!-- ============================================================== -->
						<!-- Logo -->
						<!-- ============================================================== -->
						<div class="navbar-brand" >
							<a class="logo">
								<!-- Logo icon -->
								<b class="logo-icon">
									<!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
									<!-- Dark Logo icon -->
									<img src="img/logo-icon.png" alt="homepage" class="dark-logo" />
									<!-- Light Logo icon -->
									<img src="img/logo-light-icon.png" alt="homepage" class="light-logo" />
								</b>
								<!--End Logo icon -->
								<!-- Logo text -->
								<span class="logo-text">
									<!-- dark Logo text -->
									<img src="img/logo-text.png" alt="homepage" class="dark-logo" />
									<!-- Light Logo text -->
									<img src="img/logo-light-text.png" class="light-logo" alt="homepage" />
								</span>
							</a>
						</div>
						<!-- End Logo -->
						<!-- Toggle which is visible on mobile only -->
						<a class="topbartoggler d-block d-md-none waves-effect waves-light" href="javascript:void(0)" data-toggle="collapse"
						 data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<i class="ti-more"></i>
						</a>
					</div>
					<!-- End Logo -->
					<div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin6">
						<!-- toggle and nav items -->
						<ul class="navbar-nav float-left mr-auto">
							<!-- Search -->
							<li class="nav-item search-box">
							</li>
						</ul>
						<!-- Right side toggle and nav items -->
						<ul class="navbar-nav float-right">
							<!-- User profile and search -->
							<li class="nav-item dropdown">
								<a class="dropdown-item" href="login.html"><i class="mdi m-r-10 mdi-power"></i> 退出登录</a>
							</li>
							<!-- User profile and search -->
						</ul>
					</div>
				</nav>
			</header>
			<!-- End Topbar header -->
			<!-- Left Sidebar - style you can find in sidebar.scss  -->
			<aside class="left-sidebar" data-sidebarbg="skin5" style="z-index: 7;">
				<!-- Sidebar scroll-->
				<div class="scroll-sidebar">
					<!-- Sidebar navigation-->
					<nav class="sidebar-nav">
						<ul id="sidebarnav">
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="order" aria-expanded="false">
									<i class="mdi mdi-file"></i>
									<span class="hide-menu">订单信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="reserve" aria-expanded="false">
									<i class="mdi mdi-file"></i>
									<span class="hide-menu">预定信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="user" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">用户信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="checkin_person" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">入住人信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="hotel" aria-expanded="false">
									<i class="mdi mdi-face"></i>
									<span class="hide-menu">酒店信息审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="comment_check" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">文章评论审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="hotel_commen" aria-expanded="false"
								 id="addLandlord">
									<i class="mdi mdi-border-none"></i>
									<span class="hide-menu">酒店评论审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" id="article_check" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">文章审核</span>
								</a>
							</li>
						</ul>
					</nav>
					<!-- End Sidebar navigation -->
				</div>
				<!-- End Sidebar scroll-->
			</aside>
			<!-- End Left Sidebar - style you can find in sidebar.scss  -->
			<!-- Page wrapper  -->
			<div class="page-wrapper" style="position: relative;z-index: 1;">
				<!-- Bread crumb and right sidebar toggle -->
				<div class="page-breadcrumb">
					<div class="row">
						<div class="col-5 align-self-center">
							<h4 class="page-title" id="myHead">订单信息</h4>
						</div>
						<div class="col-7 align-self-center">
							<div class="d-flex align-items-center justify-content-end">
								<nav aria-label="breadcrumb">
									<ol class="breadcrumb">
										<li class="breadcrumb-item">
											<a href="#">主页</a>
										</li>
										<li class="breadcrumb-item active" aria-current="page" id="myHeadTwo">订单信息</li>
									</ol>
								</nav>
							</div>
						</div>
					</div>
				</div>
				<!-- End Bread crumb and right sidebar toggle -->
				<!-- Container fluid  -->
				<div class="container-fluid">
					<table class="layui-hide" id="tablebox" lay-filter="tablebox" >
					</table>
				</div>
				<footer class="footer text-center">
					All Rights Reserved by Airbnb. Designed and Developed by QuadraL.
				</footer>
				<!-- End footer -->
			</div>
			<!-- End Page wrapper  -->
			<div class="myModal" style="z-index: 10;"></div>
		</div>
		
		<!-- End Wrapper -->
		<!-- All Jquery -->
		<script type="text/html" id="barDemo1">
		  <a class="layui-btn layui-btn-sm" data-toggle="modal" data-target="#myModal" lay-event="edit" >点击审核</a>
		</script>
		<script type="text/html" id="barDemo2">
			<a class="layui-btn layui-btn-danger layui-btn-xs" data-toggle="modal" data-target="#myModal" lay-event="del">删除</a>
		</script>
		<script src="layui/layui.js" charset="utf-8"></script>
		<script>
			$("#tablebox").empty();
			layui.use('table', function(){
			  var table = layui.table;
			  table.render({
			    elem: '#tablebox'
			    ,url:'http://localhost:80/QuadraL/order.do?method=getAllGrogshopOrderInfo&callback=?&state=1'
			    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
			    ,cols: [[
			      {field:'grogshop_order_id', width:240, title: '订单ID', sort: true}
			      ,{field:'user_name', width:160, title: '下单人姓名', sort: true}
			      ,{field:'price', width:140, title: '交易金额', sort: true}
			      ,{field:'place_an_order_date', width:140, title: '下单时间', sort: true}
			      ,{field:'grogshop_order_state', width:120, title: '订单状态'}
			      ,{field:'grogshop_order_describe', width:200, title: '订单描述'}
			      ,{field:'reserve_id', width:120, title: '预定ID'}
			    ]]
			    ,page: true
			  });
			});
			$("#order").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("订单信息");
				$("#myHeadTwo").html("订单信息");
				layui.use('table', function(){
				  var table = layui.table;
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/order.do?method=getAllGrogshopOrderInfo&callback=?&state=1'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'grogshop_order_id', width:240, title: '订单ID', sort: true}
				      ,{field:'user_name', width:160, title: '下单人姓名', sort: true}
				      ,{field:'price', width:140, title: '交易金额', sort: true}
				      ,{field:'place_an_order_date', width:140, title: '下单时间', sort: true}
				      ,{field:'grogshop_order_state', width:120, title: '订单状态'}
				      ,{field:'grogshop_order_describe', width:200, title: '订单描述'}
				      ,{field:'reserve_id', width:120, title: '预定ID'}
				    ]]
				    ,page: true
				  });
				});
			});
			$("#reserve").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("预定信息");
				$("#myHeadTwo").html("预定信息");
				layui.use('table', function(){
				  var table = layui.table;
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/reserve.do?method=getAllReserve&callback=?'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'reserve_id', width:140, title: '预定编号', sort: true}
				      ,{field:'reserve_date', width:160, title: '入住日期', sort: true}
				      ,{field:'reserve_day_number', width:140, title: '预定天数'}
				      ,{field:'check_out_date', width:160, title: '退房日期'}
				      ,{field:'user_name', width:150, title: '用户姓名', sort: true}
				      ,{field:'house_name', width:320, title: '房间名称'}
				    ]]
				    ,page: true
				  });
				});
			});
			$("#user").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("用户信息");
				$("#myHeadTwo").html("用户信息");
				layui.use('table', function(){
				  var table = layui.table;
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/userInfo.do?method=getAllUserInfo&callback=?'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'user_id', width:100, title: '用户ID', sort: true}
				      ,{field:'user_name', width:80, title: '用户名'}
				      ,{field:'user_headimg_url', width:80, title: '头像'}
				      ,{field:'user_email', width:120, title: '用户邮箱'}
				      ,{field:'user_phone', title: '手机号', minWidth: 120}
				      ,{field:'user_IDcard', width:140, title: '用户身份证'}
				      ,{field:'is_landlord', width:140, title: '是否为房东', sort: true}
				      ,{field:'user_pwd', width:120, title: '用户密码'}
				      ,{field:'money', width:80, title: '余额', sort: true}
				      ,{field:'real_name', width:120, title: '真实姓名', sort: true}
				      ,{field:'user_describe', width:120, title: '用户名片'}
				      ,{field:'inform_date', width:120, title: '注册时间', sort: true}
				    ]]
				    ,page: true
				  });
				});
			});
			$("#checkin_person").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("入住人信息");
				$("#myHeadTwo").html("入住人信息");
				layui.use('table', function(){
				  var table = layui.table;
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/checkInPerson.do?method=getAllCheckInPersonInfo&callback=?&state=1'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'check_in_person_id', width:210, title: '入住人编号', sort: true}
				      ,{field:'grogshop_order_id', width:350, title: '订单编号', sort: true}
				      ,{field:'check_in_person_name', width:200, title: '入住人名字', sort: true}
				      ,{field:'check_in_person_ID_card', width:320, title: '入住人身份证号'}
				    ]]
				    ,page: true
				  });
				});
			});
			$("#hotel").click(function(){
				$("#myHead").html("酒店信息审核");
				$("#myHeadTwo").html("酒店信息审核");
				$("#tablebox").empty();
				layui.use('table', function(){
				  var table = layui.table;
				  var layer = layui.layer;
				  table.on('tool(tablebox)', function(obj){
				    var data = obj.data;
				    if(obj.event === 'edit'){
				    	$(".myModal").empty();
				      	$(".myModal").append(
							'<div class="modal fade" id="myModal' +
							'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >' +
							'<div class="modal-dialog modal-lg">' +
							'<div class="modal-content">' +
							'<div class="modal-header">' +
							'<h4 class="modal-title" id="myModalLabel">' +
							'酒店审核' +
							'</h4>' +
							'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">' +
							'×' +
							'</button>' +
							'</div>' +
							'<div class="modal-body">' +
							'<div id="demo" class="carousel slide" data-ride="carousel">' +
							'<!-- 指示符 -->' +
							'<ul class="carousel-indicators" id="inner">' +
							'</ul>' +
							'<!-- 轮播图片 -->' +
							'<div class="carousel-inner" id="carouselImg">' +
							'</div>' +
							'<!-- 左右切换按钮 -->' +
							'<a class="carousel-control-prev" href="#demo" data-slide="prev">' +
							'<span class="carousel-control-prev-icon"></span>' +
							'</a>' +
							'<a class="carousel-control-next" href="#demo" data-slide="next">' +
							'<span class="carousel-control-next-icon"></span>' +
							'</a>' +
							'</div>' +
							'<!--轮播图结束-->' +
							'酒店名称：'+data.house_name+'<br>'+
							'出租类型：'+data.lease_type+'<br>'+
							'酒店地址：'+data.house_address+'<br>'+
							'酒店价格：'+data.house_price+'<br>'+
							'<div class="modal-footer">' +
							'<button type="button" id="tonguo" class="btn btn-default" data-dismiss="modal">' +
							'审核通过' +
							'</button>' +
							'<button type="button" id="jujue" class="btn btn-primary" data-dismiss="modal">' +
							'拒绝通过' +
							'</button>' +
							'<button type="button" class="btn btn-primary" data-dismiss="modal">' +
							'取消' +
							'</button>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>'
						);
						$("#tonguo").click(function(){
							$.getJSON("http://localhost:80/QuadraL/house.do?method=updateHouseStatus&callback=?",
								{"status":"1","house_id":data.house_id},function(result){
									if(result>0){
										layer.msg("已通过喵~");
									}else{
										layer.msg("出现错误了喵~");
									}
									$(".layui-laypage-btn")[0].click();
							});
						});
						$("#jujue").click(function(){
							$.getJSON("http://localhost:80/QuadraL/house.do?method=updateHouseStatus&callback=?",
								{"status":"-1","house_id":data.house_id},function(result){
									if(result>0){
										layer.msg("已拒绝喵~");
									}else{
										layer.msg("出现错误了喵~");
									}
									$(".layui-laypage-btn")[0].click();
							});
						});
						$.getJSON("http://localhost:80/QuadraL/houseInfo.do?method=getHouseInfoByID&callback=?",
								{"house_id":data.house_id},function(result){
							for (j = 0; j < result.allHouseImg.length; j++) {
								$("#carouselImg" ).append('<div class="carousel-item">' +
									'<img src="'+result.allHouseImg[j].house_img_url+'" id="imgSrc' + j + '"> ' +
									'<div class="carousel-caption"> ' +
									'</div>' +
									'</div>');
								$("#inner").append(
									'<li data-target="#demo' + j + '" data-slide-to="' + j + '"></li>'
								);
								$("#inner").children(":first").addClass("active");
							}
							$("#carouselImg").children(":first").addClass("active");
						});
				    }
				  });
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/houseInfo.do?method=getAllHouseInfo&callback=?'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'house_id', width:120, title: '酒店ID', sort: true}
				      ,{field:'user_name', width:120, title: '老板姓名'}
				      ,{field:'house_name', width:260, title: '酒店名称'}
				      ,{field:'house_intake', width:100, title: '酒店容纳量', sort: true}
				      ,{field:'lease_type', width:200, title: '出租类型'}
				      ,{field:'may_check_in_date', width:150, title: '可入住时间', sort: true}
				      ,{field:'may_check_out_date', width:150, title: '可退房时间', sort: true}
				      ,{field:'house_type', width:180, title: '酒店类型'}
				      ,{field:'house_state', width:120, title: '酒店状态', sort: true}
				      ,{field:'house_price', width:120, title: '酒店价格', sort: true}
				      ,{field:'travel_information', width:240, title: '出行信息'}
				      ,{field:'house_address', width:240, title: '酒店地址'}
				      ,{fixed:'right', width:178, align:'center', templet:function (item) {
                               var tem = [];
                               console.log(item)
                               if (item.house_state == "已审核") {
                                   tem.push('<a class="layui-btn  layui-btn-sm" style="color: #000000;background-color: #5BC0DE;">已审核</a>');
                               }
                               if(item.house_state == "未审核"){
                                   tem.push('<a lay-event="edit" data-toggle="modal" data-target="#myModal" class="layui-btn  layui-btn-sm">点击审核</a>');
                               }
                               if(item.house_state == "已拒绝"){
                                   tem.push('<a class="layui-btn  layui-btn-sm" style="color: #000000;background-color: red;">已拒绝</a>');
                               }
                               if(item.house_state == "已审核且已预定"){
                                   tem.push('<a class="layui-btn  layui-btn-sm" style="color: #000000;background-color: #5BC0DE;">已预定</a>');
                               }
                               return tem.join(' <font></font> ');
                           }}
				    ]]
				    ,page: true
				  });
				});
				$('.demoTable .layui-btn').on('click', function(){
				    var type = $(this).data('type');
				    active[type] ? active[type].call(this) : '';
				});
			});
			$("#comment_check").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("文章评论审核");
				$("#myHeadTwo").html("文章评论审核");
				layui.use('table', function(){
				  var table = layui.table;
				  table.on('tool(tablebox)', function(obj){
				    var data = obj.data;
				    if(obj.event === 'del'){
				    	$(".myModal").empty();
				      	$(".myModal").append(
							'<div class="modal fade" id="myModal' +
							'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >' +
							'<div class="modal-dialog modal-lg">' +
							'<div class="modal-content">' +
							'<div class="modal-header">' +
							'<h4 class="modal-title" id="myModalLabel">' +
							'文章评论审核' +
							'</h4>' +
							'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">' +
							'×' +
							'</button>' +
							'</div>' +
							'<div class="modal-body">' +
							'<div id="demo" class="carousel slide" data-ride="carousel">' +
							'文章名：'+data.article_name+'<br>'+
							'评论内容：'+data.comment_content+'<br>'+
							'评论时间：'+data.comment_date+'<br>'+
							'<div class="modal-footer">' +
							'<button type="button" class="btn btn-default" data-dismiss="modal" id="sc">' +
							'确认删除' +
							'</button>' +
							'<button type="button" class="btn btn-primary" data-dismiss="modal">' +
							'取消' +
							'</button>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>'
						);
						$("#sc").click(function(){
							$.getJSON("http://localhost:80/QuadraL/commen.do?method=deleteComment&callback=?",
								{"comment_id":data.comment_id},function(result){
									if(result>0){
										layer.msg("已经删除了喵~");
									}else{
										layer.msg("出现错误了喵~");
									}
									$(".layui-laypage-btn")[0].click();
							});
						});
				    }
				  });
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/commen.do?method=getAllComment&callback=?'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'comment_id', width:120, title: '评论编号', sort: true}
				      ,{field:'article_name', width:200, title: '文章名'}
				      ,{field:'user_name', width:120, title: '用户名'}
				      ,{field:'comment_content', width:240, title: '评论内容'}
				      ,{field:'replier_name', width:120, title: '回复人'}
				      ,{field:'comment_date', width:160, title: '评论时间', sort: true}
				      ,{field:'comment_praise', width:120, title: '赞的数量', sort: true}
				      ,{fixed: 'right', width:178, align:'center', toolbar: '#barDemo2'}
				    ]]
				    ,page: true
				  });
				});
				$('.demoTable .layui-btn').on('click', function(){
				    var type = $(this).data('type');
				    active[type] ? active[type].call(this) : '';
				});
			});
			$("#hotel_commen").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("酒店评论审核");
				$("#myHeadTwo").html("酒店评论审核");
				layui.use('table', function(){
				  var table = layui.table;
				  table.on('tool(tablebox)', function(obj){
				    var data = obj.data;
				    if(obj.event === 'del'){
				    	$(".myModal").empty();
				      	$(".myModal").append(
							'<div class="modal fade" id="myModal' +
							'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >' +
							'<div class="modal-dialog modal-lg">' +
							'<div class="modal-content">' +
							'<div class="modal-header">' +
							'<h4 class="modal-title" id="myModalLabel">' +
							'酒店评论审核' +
							'</h4>' +
							'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">' +
							'×' +
							'</button>' +
							'</div>' +
							'<div class="modal-body">' +
							'<div id="demo" class="carousel slide" data-ride="carousel">' +
							'房子名称：'+data.house_name+'<br>'+
							'房间评论内容：'+data.houseCom_content+'<br>'+
							'评论日期：'+data.houseCom_date+'<br>'+
							'<div class="modal-footer">' +
							'<button type="button" class="btn btn-default" data-dismiss="modal" id="sc">' +
							'确认删除' +
							'</button>' +
							'<button type="button" class="btn btn-primary" data-dismiss="modal">' +
							'取消' +
							'</button>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>'
						);
						$("#sc").click(function(){
							$.getJSON("http://localhost:80/QuadraL/houseComment.do?method=deleteHouseComment&callback=?",
								{"houseCom_id":data.houseCom_id},function(result){
									if(result>0){
										layer.msg("已经删除了喵~");
									}else{
										layer.msg("出现错误了喵~");
									}
									$(".layui-laypage-btn")[0].click();
							});
						});
				    }
				  });
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/houseComment.do?method=getAllHouseComment&callback=?'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'houseCom_id', width:140, title: '房间评论编号', sort: true}
				      ,{field:'house_name', width:300, title: '房间名'}
				      ,{field:'user_name', width:140, title: '用户名'}
				      ,{field:'houseCom_content', width:300, title: '房间评论内容'}
				      ,{field:'houseCom_date', width:150, title: '评论日期', sort: true}
				      ,{fixed: 'right', width:178, align:'center', toolbar: '#barDemo2'}
				    ]]
				    ,page: true
				  });
				});
				$('.demoTable .layui-btn').on('click', function(){
				    var type = $(this).data('type');
				    active[type] ? active[type].call(this) : '';
				});
			});
			$("#article_check").click(function(){
				$("#tablebox").empty();
				$("#myHead").html("文章审核");
				$("#myHeadTwo").html("文章审核");
				layui.use('table', function(){
				  var table = layui.table;
				  table.on('tool(tablebox)', function(obj){
				    var data = obj.data;
				    if(obj.event === 'del'){
				    	$(".myModal").empty();
				      	$(".myModal").append(
							'<div class="modal fade" id="myModal' +
							'" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >' +
							'<div class="modal-dialog modal-lg">' +
							'<div class="modal-content">' +
							'<div class="modal-header">' +
							'<h4 class="modal-title" id="myModalLabel">' +
							'文章审核' +
							'</h4>' +
							'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">' +
							'×' +
							'</button>' +
							'</div>' +
							'<div class="modal-body">' +
							'<div id="demo" class="carousel slide" data-ride="carousel">' +
							'文章题目：'+data.article_name+'<br>'+
							'文章内容：'+data.article_content+'<br>'+
							'文章发布日期：'+data.article_date+'<br>'+
							'<div class="modal-footer">' +
							'<button type="button" class="btn btn-default" data-dismiss="modal" id="sc">' +
							'确认删除' +
							'</button>' +
							'<button type="button" class="btn btn-primary" data-dismiss="modal">' +
							'取消' +
							'</button>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>' +
							'</div>'
						);
						$("#sc").click(function(){
							$.getJSON("http://localhost:80/QuadraL/article.do?method=deleteArticle&callback=?",
								{"article_id":data.article_id},function(result){
									if(result.hint>0){
										layer.msg("已经删除了喵~");
									}else{
										layer.msg("出现错误了喵~");
									}
									$(".layui-laypage-btn")[0].click();
							});
						});
				    }
				  });
				  table.render({
				    elem: '#tablebox'
				    ,url:'http://localhost:80/QuadraL/article.do?method=getAllArticle&callback=?'
				    ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
		                layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
		                //,curr: 5 //设定初始在第 5 页
		                ,limit:10 //一页显示多少条
		                ,limits:[5,10,15]//每页条数的选择项
		                ,groups: 2 //只显示 2 个连续页码
		                ,first: "首页" //不显示首页
		                ,last: "尾页" //不显示尾页
					}
				    ,cols: [[
				      {field:'article_id', width:120, title: '文章编号', sort: true}
				      ,{field:'user_name', width:160, title: '用户姓名'}
				      ,{field:'article_name', width:220, title: '文章题目'}
				      ,{field:'article_content', width:300, title: '文章内容'}
				      ,{field:'article_date', width:200, title: '文章发布日期', sort: true}
				      ,{field:'article_praise', width:120, title: '文章赞数', sort: true}
				      ,{field:'article_collect', width:120, title: '文章收藏数', sort: true}
				      ,{field:'house_name', width:210, title: '房子名称'}
				      ,{fixed: 'right', width:178, align:'center', toolbar: '#barDemo2'}
				    ]]
				    ,page: true
				  });
				});
				$('.demoTable .layui-btn').on('click', function(){
				    var type = $(this).data('type');
				    active[type] ? active[type].call(this) : '';
				});
			});
		</script>
	</body>
</html>
