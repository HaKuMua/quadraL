<!DOCTYPE html>
<html dir="ltr" lang="en">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!-- Tell the browser to be responsive to screen width -->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<!-- Favicon icon -->
		<link rel="stylesheet" href="layui/css/layui.css" media="all">
		<link rel="icon" type="image/png" sizes="16x16" href="img/favicon.png">
		<title>后台管理</title>
		<!-- Custom CSS -->
		<link href="css/style.min.css" rel="stylesheet">
		<!-- All Jquery -->
		<script src="libs/jquery/dist/jquery.min.js"></script>
		<!-- Bootstrap tether Core JavaScript -->
		<script src="libs/popper.js/dist/umd/popper.min.js"></script>
		<script src="libs/bootstrap/dist/js/bootstrap.min.js"></script>
		<!-- slimscrollbar scrollbar JavaScript -->
		<script src="extra-libs/sparkline/sparkline.js"></script>
		<!--Wave Effects -->
		<script src="js/waves.js"></script>
		<!--Menu sidebar -->
		<script src="js/sidebarmenu.js"></script>
		<!--Custom JavaScript -->
		<script src="js/custom.min.js"></script>
	</head>

	<body>
		<!-- ============================================================== -->
		<!-- Preloader - style you can find in spinners.css -->
		<!-- ============================================================== -->
		<div class="preloader">
			<div class="lds-ripple">
				<div class="lds-pos"></div>
				<div class="lds-pos"></div>
			</div>
		</div>
		<!-- ============================================================== -->
		<!-- Main wrapper - style you can find in pages.scss -->
		<!-- ============================================================== -->
		<div id="main-wrapper" data-navbarbg="skin6" data-theme="light" data-layout="vertical" data-sidebartype="full"
		 data-boxed-layout="full">
			<!-- ============================================================== -->
			<!-- Topbar header - style you can find in pages.scss -->
			<!-- ============================================================== -->
			<header class="topbar" data-navbarbg="skin6">
				<nav class="navbar top-navbar navbar-expand-md navbar-light">
					<div class="navbar-header" data-logobg="skin5">
						<!-- This is for the sidebar toggle which is visible on mobile only -->
						<a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)">
							<i class="ti-menu ti-close"></i>
						</a>
						<!-- ============================================================== -->
						<!-- Logo -->
						<!-- ============================================================== -->
						<div class="navbar-brand">
							<a href="index.html" class="logo">
								<!-- Logo icon -->
								<b class="logo-icon">
									<!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
									<!-- Dark Logo icon -->
									<img src="img/logo-icon.png" alt="homepage" class="dark-logo" />
									<!-- Light Logo icon -->
									<img src="img/logo-light-icon.png" alt="homepage" class="light-logo" />
								</b>
								<!--End Logo icon -->
								<!-- Logo text -->
								<span class="logo-text">
									<!-- dark Logo text -->
									<img src="img/logo-text.png" alt="homepage" class="dark-logo" />
									<!-- Light Logo text -->
									<img src="img/logo-light-text.png" class="light-logo" alt="homepage" />
								</span>
							</a>
						</div>
						<!-- End Logo -->
						<!-- Toggle which is visible on mobile only -->
						<a class="topbartoggler d-block d-md-none waves-effect waves-light" href="javascript:void(0)" data-toggle="collapse"
						 data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<i class="ti-more"></i>
						</a>
					</div>
					<!-- End Logo -->
					<div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin6">
						<!-- toggle and nav items -->
						<ul class="navbar-nav float-left mr-auto">
							<!-- Search -->
							<li class="nav-item search-box">
								<a class="nav-link waves-effect waves-dark" href="javascript:void(0)">
									<div class="d-flex align-items-center">
										<i class="mdi mdi-magnify font-20 mr-1"></i>
										<div class="ml-1 d-none d-sm-block">
											<span>查询</span>
										</div>
									</div>
								</a>
								<form class="app-search position-absolute">
									<input type="text" class="form-control" placeholder="查询 &amp; 输入所要查询的关键字">
									<a class="srh-btn">
										<i class="ti-close"></i>
									</a>
								</form>
							</li>
						</ul>
						<!-- Right side toggle and nav items -->
						<ul class="navbar-nav float-right">
							<!-- User profile and search -->
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle text-muted waves-effect waves-dark pro-pic" href="" data-toggle="dropdown"
								 aria-haspopup="true" aria-expanded="false"><img src="img/users/1.jpg" alt="user" class="rounded-circle" width="31"></a>
								<div class="dropdown-menu dropdown-menu-right user-dd animated">
									<a class="dropdown-item" href="javascript:void(0)"><i class="ti-user m-r-5 m-l-5"></i> 个人中心</a>
									<a class="dropdown-item" href="javascript:void(0)"><i class="ti-wallet m-r-5 m-l-5"></i> 收支情况</a>
									<a class="dropdown-item" href="javascript:void(0)"><i class="ti-email m-r-5 m-l-5"></i> 退出登录</a>
								</div>
							</li>
							<!-- User profile and search -->
						</ul>
					</div>
				</nav>
			</header>
			<!-- End Topbar header -->
			<!-- Left Sidebar - style you can find in sidebar.scss  -->
			<aside class="left-sidebar" data-sidebarbg="skin5">
				<!-- Sidebar scroll-->
				<div class="scroll-sidebar">
					<!-- Sidebar navigation-->
					<nav class="sidebar-nav">
						<ul id="sidebarnav">
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="order.html" aria-expanded="false">
									<i class="mdi mdi-file"></i>
									<span class="hide-menu">订单信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="reserve.html" aria-expanded="false">
									<i class="mdi mdi-file"></i>
									<span class="hide-menu">预定信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="user-info.html" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">用户信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="checkin-person-info.html" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">入住人信息</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="hotel.html" aria-expanded="false">
									<i class="mdi mdi-face"></i>
									<span class="hide-menu">酒店信息审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="userinfo-check.html" aria-expanded="false">
									<i class="mdi mdi-file"></i>
									<span class="hide-menu">用户信息审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="comment-check.html" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">文章评论审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="hotel-commen-check.html" aria-expanded="false"
								 id="addLandlord">
									<i class="mdi mdi-border-none"></i>
									<span class="hide-menu">酒店评论审核</span>
								</a>
							</li>
							<li class="sidebar-item">
								<a class="sidebar-link waves-effect waves-dark sidebar-link" href="article-check.html" aria-expanded="false">
									<i class="mdi mdi-arrange-bring-forward"></i>
									<span class="hide-menu">文章审核</span>
								</a>
							</li>
						</ul>
					</nav>
					<!-- End Sidebar navigation -->
				</div>
				<!-- End Sidebar scroll-->
			</aside>
			<!-- End Left Sidebar - style you can find in sidebar.scss  -->
			<!-- Page wrapper  -->
			<div class="page-wrapper">
				<!-- Bread crumb and right sidebar toggle -->
				<div class="page-breadcrumb">
					<div class="row">
						<div class="col-5 align-self-center">
							<h4 class="page-title">文章评论审核</h4>
						</div>
						<div class="col-7 align-self-center">
							<div class="d-flex align-items-center justify-content-end">
								<nav aria-label="breadcrumb">
									<ol class="breadcrumb">
										<li class="breadcrumb-item">
											<a href="#">主页</a>
										</li>
										<li class="breadcrumb-item active" aria-current="page">文章评论审核</li>
									</ol>
								</nav>
							</div>
						</div>
					</div>
				</div>
				<!-- End Bread crumb and right sidebar toggle -->
				<!-- Container fluid  -->
				<div class="container-fluid">
					<!-- Start Page Content -->
					<div class="row">
						<div class="col-12">
							<div class="card">
								<div class="card-body">
									<div class="col-12">
										<div class="card">
											<div class="card-body">
												<h4 class="card-title">文章评论审核</h4>
											</div>
										</div>
									</div>
									<table class="table table-hover table-striped" id="tablebox" style="table-layout: fixed;">
										<thead>
											<tr>
												<th scope="col" class="t1">评论编号</th>
												<th scope="col" class="t2">文章名</th>
												<th scope="col" class="t3">用户名</th>
												<th scope="col" class="t4">评论内容</th>
												<th scope="col" class="t5">回复人</th>
												<th scope="col" class="t6">评论时间</th>
												<th scope="col" class="t7">赞的数量</th>
												<th scope="col" class="t8"></th>
												<th scope="col" class="t9"></th>
											</tr>
										</thead>
										<tbody id="tb">
										</tbody>
									</table>
									<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
										<div class="modal-dialog modal-lg">
											<div class="modal-content">
												<div class="modal-header">
													<h4 class="modal-title" id="myModalLabel">
														文章评论详细内容
													</h4>
													<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
														×
													</button>

												</div>
												<div class="modal-body">
													<!--文本表格-->
													<div id="text1" style="  width:750px; height:400px;">

													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-default" data-dismiss="modal">
															返回继续操作
														</button>
													</div>
												</div>
											</div>
										</div>
										<!-- /.modal-content -->
									</div>
									<!-- /.modal -->
								</div>
							</div>
						</div>
					</div>
					<!-- End PAge Content -->
					<!-- Right sidebar -->
					<!-- .right-sidebar -->
					<!-- End Right sidebar -->
					<!--分页-->
					<div id="demo1">
					</div>
				</div>
				<!-- End Container fluid  -->
				<!-- footer -->
				<footer class="footer text-center">
					All Rights Reserved by Airbnb. Designed and Developed by QuadraL.
				</footer>
				<!-- End footer -->
			</div>
			<!-- End Page wrapper  -->
		</div>
		<!-- End Wrapper -->
		<script>
			// $.getJSON("http://localhost:80/QuadraL/commen.do?method=getAllComment&callback=?",
			// 	function(comment_result) {
			// 		map = comment_result;
			// 		window.onload = function() {
			// 			var tdArr = document.getElementById('tablebox').firstElementChild;
			// 			for (var i = 0; i < comment_result.list.length; i++) {
			// 				var tr = document.createElement("tr");
			// 				tr.innerHTML = '<td class="t1">' + comment_result.list[i].comment_id + '</td><td class="t2">' + comment_result.list[i].article_name +
			// 					'</td><td class="t3">' + comment_result.list[i].user_name + '</td><td class="t4" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">' + comment_result.list[i].comment_content + 
			// 					'</td><td class="t5">' + comment_result.list[i].replier_id + '</td><td class="t6">' + comment_result.list[i].comment_date +
			// 					'</td><td class="t7">' + comment_result.list[i].comment_praise +
			// 					'</td><td class="t8">' +
			// 					'<button class="btn more btn-primary btn-sm" id="'+i+'" data-toggle="modal" data-target="#myModal">查看文章评论详细内容</button>' +
			// 					'</td><td class="t9">'+
			// 					'<button class="btn btn-primary delete btn-sm" id=" '+i+'" >删除</button>';
			// 				tdArr.appendChild(tr)

			// 			}
			// 		};
			// 	}
			// );
			$(document).on("click", ".more", function() {
				var id = $(this).attr("id");
				var text = "&nbsp &nbsp &nbsp &nbsp &nbsp" + map.list[id].comment_content;
				document.getElementById("text1").innerHTML = text;
			});
			$(document).on("click", ".delete", function() {
				var id = $(this).attr("id");
				var num = $(this).parent().parent();
				// $.mui.ajax('',{
				// 	data:{

				// 	},
				// 	dataType:'json',//服务器返回json格式数据
				// 	type:'post',//HTTP请求类型
				// 	timeout:10000,//超时时间设置为10秒；
				// 	success:function(data){

				// 	},
				// 	error:function(xhr,type,errorThrown){

				// 	}
				// });
				$(this).parent().parent().remove();
			});
		</script>
		<!--删除按钮-->
		<script src="layui/layui.js" charset="utf-8"></script>
		<script>
			layui.use(['laypage', 'layer'], function() {
				var laypage = layui.laypage,
					layer = layui.layer;

				$.getJSON("http://localhost:80/QuadraL/commen.do?method=getAllComment&callback=?", function(comment_result) {
						//加载layui的显示页码的插件
						laypage.render({
							elem: 'demo1',
							count: comment_result.pageUtil.countRow, //获取返回值中的总行数
							limit: 2,
							jump: function(obj, first) { //点击页码的回调函数
								//obj包含了当前分页的所有参数，比如：
								console.log(obj.curr); //得到当前页，以便向服务端请求对应页的数据。
								console.log(obj.limit); //得到每页显示的条数
								//查询一页的数据
								var map;
								$.getJSON("http://localhost:80/QuadraL/commen.do?method=getAllComment&callback=?", {
									"currentPage": obj.curr,
									"pageSize": obj.limit
								}, function(comment_result) {
									$("#tb").empty(); //清除原来的数据
									//通过遍历查询到的内容，把数据显示出来
									$("#tb").append("<tr></tr>");
									console.log(comment_result.pageUtil.map.user[i]);
									for (var i = 0; i < comment_result.pageUtil.map.comment.length; i++) {
										var tr = document.createElement("tr");
										tr.innerHTML = '<td class="t1">' + comment_result.pageUtil.map.comment[i].comment_id +
											'</td><td class="t2">' + comment_result.pageUtil.map.article[i].article_name +
											'</td><td class="t3">' + comment_result.pageUtil.map.user[i].user_name +
											'</td><td class="t4" style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">' +
											comment_result.pageUtil.map.comment[i].comment_content +
											'</td><td class="t5">' + comment_result.pageUtil.map.comment.replier_id + '</td><td class="t6">' +
											comment_result.pageUtil.map.comment[i].comment_date +
											'</td><td class="t7">' + comment_result.pageUtil.map.comment.comment_praise +
											'</td><td class="t8">' +
											'<button class="btn more btn-primary btn-sm" id="' + i +
											'" data-toggle="modal" data-target="#myModal">查看文章评论详细内容</button>' +
											'</td><td class="t9">' +
											'<button class="btn btn-primary delete btn-sm" id=" ' + i + '" >删除</button>';
										$("#tb").append(tr);
									}
								}, "json");
							}
						});
					},
					"json");

			});
		</script>

	</body>

</html>
